<div>
  <mat-icon class="back" link [routerLink]="['/feed']">{{'west'}}</mat-icon>
  <h2 class="title">Créer un nouvel article</h2>
</div>

<form #f="ngForm" (ngSubmit)="onSubmit()">
  <mat-form-field>
    <mat-label>Sélectionner un thème</mat-label>
    <mat-select
      id="topic"
      name="topic"
      [(ngModel)]="formData.topic_id"
      required
    >
      <mat-option value="" disabled selected></mat-option>
      <mat-option *ngFor="let topic of topics | async" [value]="topic.id">{{ topic.title }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field>
    <mat-label>Titre de l'article</mat-label>
    <input matInput
      id="title"
      name="title"
      [(ngModel)]="formData.title"
      required
    />
  </mat-form-field>

  <mat-form-field>
    <mat-label>Contenu de l'article</mat-label>
    <textarea
      id="content"
      name="content"
      [(ngModel)]="formData.content"
      required
      rows="5"
      matInput
    ></textarea>
  </mat-form-field>

  <button mat-raised-button color="primary" type="submit" [disabled]="f.invalid">Envoyer</button>
  <span class="error-message" style="color:red" *ngIf="failed">Failed. Please retry.</span>
</form>
